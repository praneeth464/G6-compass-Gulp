<!-- ======== QUIZ PAGE TAKE ======== -->

<div id="quizPageTakeView" class="quizPage quizPageTake page-content"><div class="row">

    <!-- DIV.ROW up next to wrapping div.page-content for IE7 -->
        <div class="span12">

            <!-- content generated by quizPageTakeTpl -->

        </div><!-- /.span12 -->
    </div><!-- /.row -->
</div>

<!-- overrides for the JSON variables (these are set in settings.js but provided here for convenience in creating a JSP) -->
<script>
// G5.props.URL_JSON_QUIZ_PAGE_TAKE_QUIZ = G5.props.URL_ROOT+'ajax/quizPageTakeQuiz.json';
// G5.props.URL_JSON_QUIZ_PAGE_TAKE_QUESTION = G5.props.URL_ROOT+'ajax/quizPageTakeQuestion.json';
// G5.props.URL_JSON_QUIZ_PAGE_TAKE_ANSWER = G5.props.URL_ROOT+'ajax/quizPageTakeAnswer.json';
</script>

<!-- Instantiate the PageView - this goes here as it expresses the DOM element the PageView is getting attached to -->
<script>
    $(document).ready(function() {

        // the values for "wtName" are buried in a JSON response in the old version of this screen
        // quizPageActiveQuiz.json (static) and quizPageActiveQuizAction.do (live) are the sources
        var tabsJson = [
            {
                "id" : 1,
                "name" : "stepIntro",
                "isActive" : false,
                "state" : "unlocked",
                "contentSel" : ".wizardTabsContent .stepIntroContent",
                "wtNumber" : "",
                "wtName" : "View Quiz Details",
                "hideDeedle" : false
            },
            {
                "id" : 2,
                "name" : "stepMaterials",
                "isActive" : false,
                "state" : "locked",
                "contentSel" : ".wizardTabsContent .stepMaterialsContent",
                "wtNumber" : "",
                "wtName" : "View Course Materials",
                "hideDeedle" : false
            },
            {
                "id" : 3,
                "name" : "stepQuestions",
                "isActive" : false,
                "state" : "locked",
                "contentSel" : ".wizardTabsContent .stepQuestionsContent",
                "wtNumber" : "",
                "wtName" : "Take the Quiz",
                "hideDeedle" : false
            },
            {
                "id" : 4,
                "name" : "stepResults",
                "isActive" : false,
                "state" : "locked",
                "contentSel" : ".wizardTabsContent .stepResultsContent",
                "wtNumber" : "",
                "wtName" : "View Results",
                "hideDeedle" : false
            }
        ];

        // if desired, the quizJson object from core/base/ajax/quizPageTakeQuiz.json can be embedded here
        var quizJson;

        //attach the view to an existing DOM element
        G5.views.QuizPageTake = new QuizPageTakeView({
            el:$('#quizPageTakeView'),
            pageNav : {
                back : {
                    text : 'Back',
                    url : 'layout.html?tpl=quizPage&tplPath=apps/quiz/tpl/'
                },
                home : {
                    text : 'Home',
                    url : 'layout.html?tplPath=base/tpl/&amp;tpl=modulesPage.html'
                }
            },
            pageTitle : 'Take a Quiz',
            quizJson : quizJson,
            tabsJson : tabsJson,
            // Java: ignore this object for now and do not replicate in the JSP
            // I was doing some experimenting with passing CM keys as JSON instead of embedding within the JSPs, but haven't perfected the technique yet
            cm : {
                claims : {
                    quiz : {
                        submission : {
                            PRINT : "Print Results",
                            QUIZ_SAVED_FOR_LATER : "Your quiz has been saved.",
                            SUCCESS : "Success!"
                        }
                    }
                }
            }
        });

    });
</script>

<!-- NOTE: the following includes were added to make this shell behave like the JSP -->
<script type="text/template" id="quizPageTakeTplTpl">
    <jsp:include page="quizPageTakeTpl.html"></jsp:include>
    <?php include("quizPageTakeTpl.html"); ?>
</script>

<script type="text/template" id="quizPageTakeIntroTplTpl">
    <jsp:include page="quizPageTakeIntroTpl.html"></jsp:include>
    <?php include("quizPageTakeIntroTpl.html"); ?>
</script>

<script type="text/template" id="quizPageTakeMaterialsTplTpl">
    <jsp:include page="quizPageTakeMaterialsTpl.html"></jsp:include>
    <?php include("quizPageTakeMaterialsTpl.html"); ?>
</script>

<script type="text/template" id="quizPageTakeQuestionsTplTpl">
    <jsp:include page="quizPageTakeQuestionsTpl.html"></jsp:include>
    <?php include("quizPageTakeQuestionsTpl.html"); ?>
</script>

<script type="text/template" id="quizPageTakeResultsTplTpl">
    <jsp:include page="quizPageTakeResultsTpl.html"></jsp:include>
    <?php include("quizPageTakeResultsTpl.html"); ?>
</script>

<!-- wizardTab template (relative to core/base) -->
<script type="text/template" id="wizardTabTpl">
    <jsp:include page="../../../base/tpl/wizardTab.html"></jsp:include>
    <?php include("base/tpl/wizardTab.html"); ?>
</script>
